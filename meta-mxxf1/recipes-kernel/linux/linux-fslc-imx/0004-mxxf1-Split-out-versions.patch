From c77860602121069b5c384d4eef2b29eaef66ca4a Mon Sep 17 00:00:00 2001
From: Hans Christian Lonstad <hcl@datarespons.no>
Date: Mon, 14 Feb 2022 17:32:06 +0100
Subject: [PATCH 4/4] mxxf1: Split out versions

Add PHY changes
---
 arch/arm/boot/dts/mxxf1-common.dtsi | 777 ++++++++++++++--------------
 arch/arm/boot/dts/mxxf1-hw4.dts     |  33 ++
 arch/arm/boot/dts/mxxf1-tsup.dts    |  21 +
 arch/arm/boot/dts/mxxf1.dts         |  76 ++-
 4 files changed, 482 insertions(+), 425 deletions(-)

diff --git a/arch/arm/boot/dts/mxxf1-common.dtsi b/arch/arm/boot/dts/mxxf1-common.dtsi
index 4b6ff3eb99a9..ecb09d116624 100644
--- a/arch/arm/boot/dts/mxxf1-common.dtsi
+++ b/arch/arm/boot/dts/mxxf1-common.dtsi
@@ -12,178 +12,177 @@
 #include <dt-bindings/gpio/gpio.h>
 
 / {
-    aliases {
-        mxcfb0 = &mxcfb1;
-        mxcfb1 = &mxcfb2;
-        mmc0 = &usdhc3;
-        mmc1 = &usdhc4;
-        rtc0 = &main_rtc;
-    };
-
-    memory {
-        reg = <0x10000000 0x40000000>;
-    };
+	aliases {
+		mxcfb0 = &mxcfb1;
+		mxcfb1 = &mxcfb2;
+		mmc0 = &usdhc3;
+		mmc1 = &usdhc4;
+		rtc0 = &main_rtc;
+	};
+
+	memory {
+		reg = <0x10000000 0x40000000>;
+	};
 
 	chosen {
 		stdout-path = &uart1;
 	};
 
-    backlight  {
-        compatible = "pwm-backlight";
-        pwms = <&pwm1 0 500000>;
-        brightness-levels = < 0 1 2 3 4 5 6 8  11 16  23  32 48
-                              64 81 100 121 144 169 196 225
-                              256 289 324 361 400 441 484 529
-                              576 625 676 729 784 841 900 961
-                              1024 1089 1156 1225 1296 1369 1444 1521
-                              1600 1681 1764 1849 1936 2025 2116 2209 >;
-        default-brightness-level = <32>;
-        enable-gpios = <&gpio1 2 GPIO_ACTIVE_HIGH>;
-        power-supply = <&reg_5v>;
-        status = "okay";
-    };
-
-    mxcfb1: fb@0 {
-        compatible = "fsl,mxc_sdc_fb";
-        disp_dev = "ldb";
-        interface_pix_fmt = "RGB24";
-        default_bpp = <32>;
-        int_clk = <0>;
-        late_init = <0>;
-        status = "okay";
-    };
-
-    mxcfb2: fb@1 {
-        compatible = "fsl,mxc_sdc_fb";
-        disp_dev = "hdmi";
-        interface_pix_fmt = "RGB24";
-        mode_str ="1920x1080M@60";
-        default_bpp = <24>;
-        int_clk = <0>;
-        late_init = <0>;
-        status = "disabled";
-    };
-
-    regulators {
-        compatible = "simple-bus";
-
-        reg_usb_otg_vbus: usb_otg_vbus {
-            compatible = "regulator-fixed";
-            regulator-name = "usb_otg_vbus";
-            regulator-min-microvolt = <5000000>;
-            regulator-max-microvolt = <5000000>;
-            gpio = <&gpio3 22 0>;
-            enable-active-high;
-        };
-
-        reg_usb_h1_vbus: usb_h1_vbus {
-            compatible = "regulator-fixed";
-            regulator-name = "usb_h1_vbus";
-            regulator-min-microvolt = <5000000>;
-            regulator-max-microvolt = <5000000>;
-            gpio = <&gpio1 29 0>;
-            enable-active-high;
-        };
-        reg_usb_p0_vbus: usb_p0_vbus {
-            compatible = "regulator-fixed";
-            regulator-name = "usb_p0_vbus";
-            regulator-min-microvolt = <5000000>;
-            regulator-max-microvolt = <5000000>;
-            gpio = <&gpio3 28 0>;
-            enable-active-high;
-            regulator-boot-on;
-            regulator-always-on;
-        };
-
-        reg_usb_p1_vbus: usb_p1_vbus {
-            compatible = "regulator-fixed";
-            regulator-name = "usb_p1_vbus";
-            regulator-min-microvolt = <5000000>;
-            regulator-max-microvolt = <5000000>;
-            gpio = <&gpio2 3 0>;
-            enable-active-high;
-            regulator-boot-on;
-            regulator-always-on;
-        };
-
-        reg_usb_p2_vbus: usb_p2_vbus {
-            compatible = "regulator-fixed";
-            regulator-name = "usb_p2_vbus";
-            regulator-min-microvolt = <5000000>;
-            regulator-max-microvolt = <5000000>;
-            gpio = <&gpio2 7 0>;
-            enable-active-high;
-            regulator-boot-on;
-            regulator-always-on;
-        };
-
-        reg_usb_p3_vbus: usb_p3_vbus {
-            compatible = "regulator-fixed";
-            regulator-name = "usb_p3_vbus";
-            regulator-min-microvolt = <5000000>;
-            regulator-max-microvolt = <5000000>;
-            gpio = <&gpio6 9 0>;
-            enable-active-high;
-            regulator-boot-on;
-            regulator-always-on;
-        };
-
-        reg_5v: ext_5v {
-            compatible = "regulator-fixed";
-            regulator-name = "5V";
-            regulator-min-microvolt = <5000000>;
-            regulator-max-microvolt = <5000000>;
-            gpio = <&gpio6 10 0>;
-            enable-active-high;
-            regulator-boot-on;
-            regulator-always-on;
-        };
-
-        reg_touch: touch_pwr {
-            compatible = "regulator-fixed";
-            regulator-name = "TOUCH";
-            regulator-min-microvolt = <3300000>;
-            regulator-max-microvolt = <3300000>;
-            gpio = <&gpio1 4 0>;
-            enable-active-high;
-            regulator-always-on;
-        };
-
-
-        reg_lcd: lcd_pwr {
-            compatible = "regulator-fixed";
-            regulator-name = "LCD";
-            regulator-min-microvolt = <3300000>;
-            regulator-max-microvolt = <3300000>;
-            gpio = <&gpio6 15 0>;
-            enable-active-high;
-            regulator-boot-on;
-            regulator-always-on;
-        };
-
-    };
-
-    gpio-keys {
-        compatible = "gpio-keys";
-        power {
-            label = "Power Button";
-            gpios = <&gpio3 29 1>;
-            linux,code = <KEY_POWER>; /* KEY_POWER */
-            gpio-key,wakeup;
-        };
-
-        dimm-up {
-            label = "Brightness Up";
-            gpios = <&gpio4 7 1>;
-            linux,code = <KEY_BRIGHTNESSUP>; /* KEY_BRIGHTNESSUP */
-        };
-
-        dimm-down {
-            label = "Brightness Down";
-            gpios = <&gpio4 6 1>;
-            linux,code = <KEY_BRIGHTNESSDOWN>; /* KEY_BRIGHTNESSDOWN */
-        };
-    };
+	backlight  {
+		compatible = "pwm-backlight";
+		pwms = <&pwm1 0 500000>;
+		brightness-levels = < 0 1 2 3 4 5 6 8  11 16  23  32 48
+							  64 81 100 121 144 169 196 225
+							  256 289 324 361 400 441 484 529
+							  576 625 676 729 784 841 900 961
+							  1024 1089 1156 1225 1296 1369 1444 1521
+							  1600 1681 1764 1849 1936 2025 2116 2209 >;
+		default-brightness-level = <32>;
+		enable-gpios = <&gpio1 2 GPIO_ACTIVE_HIGH>;
+		power-supply = <&reg_5v>;
+		status = "okay";
+	};
+
+	mxcfb1: fb@0 {
+		compatible = "fsl,mxc_sdc_fb";
+		disp_dev = "ldb";
+		interface_pix_fmt = "RGB24";
+		default_bpp = <32>;
+		int_clk = <0>;
+		late_init = <0>;
+		status = "okay";
+	};
+
+	mxcfb2: fb@1 {
+		compatible = "fsl,mxc_sdc_fb";
+		disp_dev = "hdmi";
+		interface_pix_fmt = "RGB24";
+		mode_str ="1920x1080M@60";
+		default_bpp = <24>;
+		int_clk = <0>;
+		late_init = <0>;
+		status = "disabled";
+	};
+
+	regulators {
+		compatible = "simple-bus";
+
+		reg_usb_otg_vbus: usb_otg_vbus {
+			compatible = "regulator-fixed";
+			regulator-name = "usb_otg_vbus";
+			regulator-min-microvolt = <5000000>;
+			regulator-max-microvolt = <5000000>;
+			gpio = <&gpio3 22 0>;
+			enable-active-high;
+		};
+
+		reg_usb_h1_vbus: usb_h1_vbus {
+			compatible = "regulator-fixed";
+			regulator-name = "usb_h1_vbus";
+			regulator-min-microvolt = <5000000>;
+			regulator-max-microvolt = <5000000>;
+			gpio = <&gpio1 29 0>;
+			enable-active-high;
+		};
+		reg_usb_p0_vbus: usb_p0_vbus {
+			compatible = "regulator-fixed";
+			regulator-name = "usb_p0_vbus";
+			regulator-min-microvolt = <5000000>;
+			regulator-max-microvolt = <5000000>;
+			gpio = <&gpio3 28 0>;
+			enable-active-high;
+			regulator-boot-on;
+			regulator-always-on;
+		};
+
+		reg_usb_p1_vbus: usb_p1_vbus {
+			compatible = "regulator-fixed";
+			regulator-name = "usb_p1_vbus";
+			regulator-min-microvolt = <5000000>;
+			regulator-max-microvolt = <5000000>;
+			gpio = <&gpio2 3 0>;
+			enable-active-high;
+			regulator-boot-on;
+			regulator-always-on;
+		};
+
+		reg_usb_p2_vbus: usb_p2_vbus {
+			compatible = "regulator-fixed";
+			regulator-name = "usb_p2_vbus";
+			regulator-min-microvolt = <5000000>;
+			regulator-max-microvolt = <5000000>;
+			gpio = <&gpio2 7 0>;
+			enable-active-high;
+			regulator-boot-on;
+			regulator-always-on;
+		};
+
+		reg_usb_p3_vbus: usb_p3_vbus {
+			compatible = "regulator-fixed";
+			regulator-name = "usb_p3_vbus";
+			regulator-min-microvolt = <5000000>;
+			regulator-max-microvolt = <5000000>;
+			gpio = <&gpio6 9 0>;
+			enable-active-high;
+			regulator-boot-on;
+			regulator-always-on;
+		};
+
+		reg_5v: ext_5v {
+			compatible = "regulator-fixed";
+			regulator-name = "5V";
+			regulator-min-microvolt = <5000000>;
+			regulator-max-microvolt = <5000000>;
+			gpio = <&gpio6 10 0>;
+			enable-active-high;
+			regulator-boot-on;
+			regulator-always-on;
+		};
+
+		reg_touch: touch_pwr {
+			compatible = "regulator-fixed";
+			regulator-name = "TOUCH";
+			regulator-min-microvolt = <3300000>;
+			regulator-max-microvolt = <3300000>;
+			gpio = <&gpio1 4 0>;
+			enable-active-high;
+			regulator-always-on;
+		};
+
+
+		reg_lcd: lcd_pwr {
+			compatible = "regulator-fixed";
+			regulator-name = "LCD";
+			regulator-min-microvolt = <3300000>;
+			regulator-max-microvolt = <3300000>;
+			gpio = <&gpio6 15 0>;
+			enable-active-high;
+			regulator-always-on;
+		};
+
+	};
+
+	gpio-keys {
+		compatible = "gpio-keys";
+		power {
+			label = "Power Button";
+			gpios = <&gpio3 29 1>;
+			linux,code = <KEY_POWER>; /* KEY_POWER */
+			gpio-key,wakeup;
+		};
+
+		dimm-up {
+			label = "Brightness Up";
+			gpios = <&gpio4 7 1>;
+			linux,code = <KEY_BRIGHTNESSUP>; /* KEY_BRIGHTNESSUP */
+		};
+
+		dimm-down {
+			label = "Brightness Down";
+			gpios = <&gpio4 6 1>;
+			linux,code = <KEY_BRIGHTNESSDOWN>; /* KEY_BRIGHTNESSDOWN */
+		};
+	};
 
 	user-gpios {
 
@@ -217,45 +216,45 @@ gpio-ext-buzz {
 		};
 
 /*
-        gpio-phy-rst {
-            gpios = <&gpio1 25 GPIO_ACTIVE_LOW>;
-            status = "okay";
-            value = <1>;
-        };
+		gpio-phy-rst {
+			gpios = <&gpio1 25 GPIO_ACTIVE_LOW>;
+			status = "okay";
+			value = <1>;
+		};
 */
-        gpio-hw0 {
-            gpios = <&gpio1 15 GPIO_ACTIVE_HIGH>;
-            status = "okay";
-        };
-
-        gpio-hw1 {
-            gpios = <&gpio1 14 GPIO_ACTIVE_HIGH>;
-            status = "okay";
-        };
-
-        gpio-hw2 {
-            gpios = <&gpio1 13 GPIO_ACTIVE_HIGH>;
-            status = "okay";
-        };
-
-        gpio-hw3 {
-            gpios = <&gpio1 12 GPIO_ACTIVE_HIGH>;
-            status = "okay";
-        };
-
-        gpio-lan2-off {
+		gpio-hw0 {
+			gpios = <&gpio1 15 GPIO_ACTIVE_HIGH>;
+			status = "okay";
+		};
+
+		gpio-hw1 {
+			gpios = <&gpio1 14 GPIO_ACTIVE_HIGH>;
+			status = "okay";
+		};
+
+		gpio-hw2 {
+			gpios = <&gpio1 13 GPIO_ACTIVE_HIGH>;
+			status = "okay";
+		};
+
+		gpio-hw3 {
+			gpios = <&gpio1 12 GPIO_ACTIVE_HIGH>;
+			status = "okay";
+		};
+
+		gpio-lan2-off {
 		gpios = <&gpio3 23 GPIO_ACTIVE_LOW>;
 		value = <1>;
 		status = "okay";
-        };
+		};
 
 	};
 
 	pwm-buzzer {
-        compatible = "pwm-buzzer";
-        pwms = <&pwm3 0 434782>;
-        status = "okay";
-    };
+		compatible = "pwm-buzzer";
+		pwms = <&pwm3 0 434782>;
+		status = "okay";
+	};
 
 };
 
@@ -268,48 +267,26 @@ &ecspi1 {
 	nodma;
 
 flash: m25p80@0 {
-        #address-cells = <1>;
-        #size-cells = <1>;
-        compatible = "jedec,spi-nor";
-        spi-max-frequency = <20000000>;
-        reg = <0>;
-        partition@0 {
-            label = "u-boot";
-            reg = <0 0x000C0000>;
-        };
-        partition@0x000C0000 {
-            label = "u-boot-env";
-            reg = <0x000C0000 0x00040000>;
-        };
-        partition@0x00100000 {
-            label = "factory";
-            reg = <0x00100000 0x00300000>;
-        };
-    };
-};
-
-&fec {
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_enet_lm>;
-	phy-mode = "rgmii-id";
-	status = "okay";
-	phy-reset-duration = <10>;
-	phy-reset-gpios = <&gpio1 25 GPIO_ACTIVE_LOW>;
-	phy-handle = <&arphy>;
-	phy-supply = <&vgen6_reg>;
-	mdio {
-	   #address-cells = <1>;
-       #size-cells = <0>;
-	   arphy: ethernet-phy@1 {
-	       compatible = "ethernet-phy-ieee802.3-c22";
-	       reg = <0x1>;
-	       interrupt-parent = <&gpio1>;
-	       interrupts = <26 IRQ_TYPE_EDGE_FALLING>;
-	   };
+		#address-cells = <1>;
+		#size-cells = <1>;
+		compatible = "jedec,spi-nor";
+		spi-max-frequency = <20000000>;
+		reg = <0>;
+		partition@0 {
+			label = "u-boot";
+			reg = <0 0x000C0000>;
+		};
+		partition@0x000C0000 {
+			label = "u-boot-env";
+			reg = <0x000C0000 0x00040000>;
+		};
+		partition@0x00100000 {
+			label = "factory";
+			reg = <0x00100000 0x00300000>;
+		};
 	};
 };
 
-
 &gpc {
 	fsl,ldo-bypass = <0>; /* use ldo-bypass, u-boot will check it and configure */
 	fsl,wdog-reset = <2>; /* watchdog select of reset source */
@@ -408,8 +385,8 @@ vgen2_reg: vgen2 {
 			};
 
 			vgen3_reg: vgen3 {
-				regulator-min-microvolt = <1800000>;
-				regulator-max-microvolt = <3300000>;
+				regulator-min-microvolt = <2500000>;
+				regulator-max-microvolt = <2500000>;
 			};
 
 			vgen4_reg: vgen4 {
@@ -433,15 +410,15 @@ vgen6_reg: vgen6 {
 	};
 
 	eeprom@50 {
-        compatible = "atmel,24c16";
-        reg = <0x50>;
-        pagesize = <16>;
-    };
+		compatible = "atmel,24c16";
+		reg = <0x50>;
+		pagesize = <16>;
+	};
 
 };
 
 &i2c1 {
-    status = "disabled";
+	status = "disabled";
 };
 
 &iomuxc {
@@ -449,50 +426,50 @@ &iomuxc {
 	pinctrl-0 = <&pinctrl_hog_1>;
 
 	hog {
-        pinctrl_hog_1: hoggrp-1 {
-            fsl,pins = <
-                MX6QDL_PAD_GPIO_4__GPIO1_IO04   0x80000000
-                MX6QDL_PAD_GPIO_5__GPIO1_IO05   0x80000000
-                MX6QDL_PAD_SD1_CMD__GPIO1_IO18  0x80000000
-                MX6QDL_PAD_SD1_DAT2__GPIO1_IO19 0x80000000
-                MX6QDL_PAD_NANDF_D0__GPIO2_IO00 0x80000000
-                MX6QDL_PAD_NANDF_D1__GPIO2_IO01 0x80000000
-                MX6QDL_PAD_NANDF_D2__GPIO2_IO02 0x80000000
-                MX6QDL_PAD_NANDF_D3__GPIO2_IO03 0x80000000
-                MX6QDL_PAD_NANDF_D7__GPIO2_IO07 0x80000000
-                MX6QDL_PAD_NANDF_ALE__GPIO6_IO08 0x80000000
-                MX6QDL_PAD_NANDF_CLE__GPIO6_IO07 0x80000000
-                MX6QDL_PAD_GPIO_0__CCM_CLKO1    0x130b0
-                MX6QDL_PAD_NANDF_CS2__GPIO6_IO15 0x80000000
-                MX6QDL_PAD_NANDF_CS3__GPIO6_IO16 0x80000000
-                MX6QDL_PAD_EIM_D26__GPIO3_IO26  0x80000000
-                MX6QDL_PAD_EIM_CS1__GPIO2_IO24  0x80000000
-                MX6QDL_PAD_ENET_RXD0__GPIO1_IO27 0x80000000
-                MX6QDL_PAD_EIM_A25__GPIO5_IO02  0x80000000
-                MX6QDL_PAD_ENET_TXD1__GPIO1_IO29 0x80000000
-                MX6QDL_PAD_EIM_D28__GPIO3_IO28  0x80000000
-                MX6QDL_PAD_NANDF_CS0__GPIO6_IO11 0x80000000
-                MX6QDL_PAD_NANDF_CS1__GPIO6_IO14 0x80000000
-                MX6QDL_PAD_EIM_EB3__GPIO2_IO31  0x80000000
-                MX6QDL_PAD_EIM_DA9__GPIO3_IO09  0x80000000
-                MX6QDL_PAD_GPIO_2__GPIO1_IO02   0x80000000
-                MX6QDL_PAD_EIM_D29__GPIO3_IO29  0x80000000
-                MX6QDL_PAD_SD3_RST__GPIO7_IO08  0x80000000
-                MX6QDL_PAD_GPIO_1__WDOG2_B      0x80000000
-                MX6QDL_PAD_GPIO_2__GPIO1_IO02   0x80000000
-                MX6QDL_PAD_NANDF_RB0__GPIO6_IO10 0x80000000
-                MX6QDL_PAD_NANDF_WP_B__GPIO6_IO09 0x80000000
-                MX6QDL_PAD_CSI0_DATA_EN__GPIO5_IO20 0x80000000
-
-                MX6QDL_PAD_SD2_DAT0__GPIO1_IO15 0x00012000
-                MX6QDL_PAD_SD2_DAT1__GPIO1_IO14 0x00012000
-                MX6QDL_PAD_SD2_DAT2__GPIO1_IO13 0x00012000
-                MX6QDL_PAD_SD2_DAT3__GPIO1_IO12 0x00012000
-
-                MX6QDL_PAD_EIM_D30__USB_H1_OC 0x1b0b1
-            >;
-        };
-    };
+		pinctrl_hog_1: hoggrp-1 {
+			fsl,pins = <
+				MX6QDL_PAD_GPIO_4__GPIO1_IO04   0x80000000
+				MX6QDL_PAD_GPIO_5__GPIO1_IO05   0x80000000
+				MX6QDL_PAD_SD1_CMD__GPIO1_IO18  0x80000000
+				MX6QDL_PAD_SD1_DAT2__GPIO1_IO19 0x80000000
+				MX6QDL_PAD_NANDF_D0__GPIO2_IO00 0x80000000
+				MX6QDL_PAD_NANDF_D1__GPIO2_IO01 0x80000000
+				MX6QDL_PAD_NANDF_D2__GPIO2_IO02 0x80000000
+				MX6QDL_PAD_NANDF_D3__GPIO2_IO03 0x80000000
+				MX6QDL_PAD_NANDF_D7__GPIO2_IO07 0x80000000
+				MX6QDL_PAD_NANDF_ALE__GPIO6_IO08 0x80000000
+				MX6QDL_PAD_NANDF_CLE__GPIO6_IO07 0x80000000
+				MX6QDL_PAD_GPIO_0__CCM_CLKO1    0x130b0
+				MX6QDL_PAD_NANDF_CS2__GPIO6_IO15 0x80000000
+				MX6QDL_PAD_NANDF_CS3__GPIO6_IO16 0x80000000
+				MX6QDL_PAD_EIM_D26__GPIO3_IO26  0x80000000
+				MX6QDL_PAD_EIM_CS1__GPIO2_IO24  0x80000000
+				MX6QDL_PAD_ENET_RXD0__GPIO1_IO27 0x80000000
+				MX6QDL_PAD_EIM_A25__GPIO5_IO02  0x80000000
+				MX6QDL_PAD_ENET_TXD1__GPIO1_IO29 0x80000000
+				MX6QDL_PAD_EIM_D28__GPIO3_IO28  0x80000000
+				MX6QDL_PAD_NANDF_CS0__GPIO6_IO11 0x80000000
+				MX6QDL_PAD_NANDF_CS1__GPIO6_IO14 0x80000000
+				MX6QDL_PAD_EIM_EB3__GPIO2_IO31  0x80000000
+				MX6QDL_PAD_EIM_DA9__GPIO3_IO09  0x80000000
+				MX6QDL_PAD_GPIO_2__GPIO1_IO02   0x80000000
+				MX6QDL_PAD_EIM_D29__GPIO3_IO29  0x80000000
+				MX6QDL_PAD_SD3_RST__GPIO7_IO08  0x80000000
+				MX6QDL_PAD_GPIO_1__WDOG2_B      0x80000000
+				MX6QDL_PAD_GPIO_2__GPIO1_IO02   0x80000000
+				MX6QDL_PAD_NANDF_RB0__GPIO6_IO10 0x80000000
+				MX6QDL_PAD_NANDF_WP_B__GPIO6_IO09 0x80000000
+				MX6QDL_PAD_CSI0_DATA_EN__GPIO5_IO20 0x80000000
+
+				MX6QDL_PAD_SD2_DAT0__GPIO1_IO15 0x00012000
+				MX6QDL_PAD_SD2_DAT1__GPIO1_IO14 0x00012000
+				MX6QDL_PAD_SD2_DAT2__GPIO1_IO13 0x00012000
+				MX6QDL_PAD_SD2_DAT3__GPIO1_IO12 0x00012000
+
+				MX6QDL_PAD_EIM_D30__USB_H1_OC 0x1b0b1
+			>;
+		};
+	};
 
 	pcie {
 		pinctrl_pcie: pciegrp {
@@ -577,14 +554,14 @@ MX6QDL_PAD_SD1_DAT1__PWM3_OUT 0x1b0b1
 		};
 	};
 
-    i2c2 {
-        pinctrl_i2c2: i2c2grp {
-            fsl,pins = <
-                MX6QDL_PAD_KEY_COL3__I2C2_SCL       0x4001b8b1
-                MX6QDL_PAD_KEY_ROW3__I2C2_SDA       0x4001b8b1
-             >;
-        };
-    };
+	i2c2 {
+		pinctrl_i2c2: i2c2grp {
+			fsl,pins = <
+				MX6QDL_PAD_KEY_COL3__I2C2_SCL       0x4001b8b1
+				MX6QDL_PAD_KEY_ROW3__I2C2_SDA       0x4001b8b1
+			 >;
+		};
+	};
 
 	i2c3 {
 		pinctrl_i2c3: i2c3grp {
@@ -630,9 +607,9 @@ MX6QDL_PAD_SD4_DAT1__SD4_DATA1		0x17059
 				MX6QDL_PAD_SD4_DAT2__SD4_DATA2		0x17059
 				MX6QDL_PAD_SD4_DAT3__SD4_DATA3		0x17059
 				MX6QDL_PAD_SD4_DAT4__SD4_DATA4      0x17059
-                MX6QDL_PAD_SD4_DAT5__SD4_DATA5      0x17059
-                MX6QDL_PAD_SD4_DAT6__SD4_DATA6      0x17059
-                MX6QDL_PAD_SD4_DAT7__SD4_DATA7      0x17059
+				MX6QDL_PAD_SD4_DAT5__SD4_DATA5      0x17059
+				MX6QDL_PAD_SD4_DAT6__SD4_DATA6      0x17059
+				MX6QDL_PAD_SD4_DAT7__SD4_DATA7      0x17059
 			>;
 		};
 	};
@@ -640,8 +617,8 @@ MX6QDL_PAD_SD4_DAT7__SD4_DATA7      0x17059
 	enet {
 		pinctrl_enet_lm: enetgrp-lm2 {
 			fsl,pins = <
-                MX6QDL_PAD_ENET_CRS_DV__GPIO1_IO25  	0x80000000	/* Phy reset (low) */
-                MX6QDL_PAD_ENET_RXD1__GPIO1_IO26 		0x1b0b0     	/* Phy IRQ (low) */
+				MX6QDL_PAD_ENET_CRS_DV__GPIO1_IO25    0x1b0b0	/* Phy reset (low) */
+				MX6QDL_PAD_ENET_RXD1__GPIO1_IO26 	  0x1b0b0     	/* Phy IRQ (low) */
 				MX6QDL_PAD_ENET_MDIO__ENET_MDIO       0x1b0b0
 				MX6QDL_PAD_ENET_MDC__ENET_MDC         0x1b0b0
 				MX6QDL_PAD_RGMII_TXC__RGMII_TXC       0x1b0b0
@@ -657,76 +634,76 @@ MX6QDL_PAD_RGMII_RD1__RGMII_RD1       0x1b0b0
 				MX6QDL_PAD_RGMII_RD2__RGMII_RD2       0x1b0b0
 				MX6QDL_PAD_RGMII_RD3__RGMII_RD3       0x1b0b0
 				MX6QDL_PAD_RGMII_RX_CTL__RGMII_RX_CTL 0x1b0b0
-
+				MX6QDL_PAD_ENET_TX_EN__GPIO1_IO28     0x1b0b0
 			>;
 		};
 	};
 
 	can1 {
-        pinctrl_flexcan1: flexcan1grp {
-            fsl,pins = <
-                MX6QDL_PAD_GPIO_8__FLEXCAN1_RX    0x80000000
-                MX6QDL_PAD_GPIO_7__FLEXCAN1_TX    0x80000000
-            >;
-        };
-    };
-
-    can2 {
-        pinctrl_flexcan2: flexcan2grp {
-            fsl,pins = <
-                MX6QDL_PAD_KEY_COL4__FLEXCAN2_TX    0x80000000
-                MX6QDL_PAD_KEY_ROW4__FLEXCAN2_RX    0x80000000
-            >;
-        };
-    };
+		pinctrl_flexcan1: flexcan1grp {
+			fsl,pins = <
+				MX6QDL_PAD_GPIO_8__FLEXCAN1_RX    0x80000000
+				MX6QDL_PAD_GPIO_7__FLEXCAN1_TX    0x80000000
+			>;
+		};
+	};
+
+	can2 {
+		pinctrl_flexcan2: flexcan2grp {
+			fsl,pins = <
+				MX6QDL_PAD_KEY_COL4__FLEXCAN2_TX    0x80000000
+				MX6QDL_PAD_KEY_ROW4__FLEXCAN2_RX    0x80000000
+			>;
+		};
+	};
 };
 
 &ldb {
-    status = "okay";
-
-    lvds-channel@0 {
-        fsl,data-mapping = "spwg";
-        fsl,data-width = <24>;
-        status = "okay";
-        primary;
-        crtc = "ipu1-di0";
-
-        display-timings {
-            native-mode = <&timing0>;
-            timing0: hsd100pxn1 {
-                clock-frequency = <65000000>;
-                hactive = <1024>;
-                vactive = <768>;
-                hback-porch = <220>;
-                hfront-porch = <40>;
-                vback-porch = <21>;
-                vfront-porch = <7>;
-                hsync-len = <60>;
-                vsync-len = <10>;
-            };
-        };
-    };
-
-    lvds-channel@1 {
-        fsl,data-mapping = "spwg";
-        fsl,data-width = <24>;
-        status = "disabled";
-        crtc = "ipu2-di1";
-        display-timings {
-            native-mode = <&timing1>;
-            timing1: hsd100pxn1 {
-                clock-frequency = <65000000>;
-                hactive = <1024>;
-                vactive = <768>;
-                hback-porch = <220>;
-                hfront-porch = <40>;
-                vback-porch = <21>;
-                vfront-porch = <7>;
-                hsync-len = <60>;
-                vsync-len = <10>;
-            };
-        };
-    };
+	status = "okay";
+
+	lvds-channel@0 {
+		fsl,data-mapping = "spwg";
+		fsl,data-width = <24>;
+		status = "okay";
+		primary;
+		crtc = "ipu1-di0";
+
+		display-timings {
+			native-mode = <&timing0>;
+			timing0: hsd100pxn1 {
+				clock-frequency = <65000000>;
+				hactive = <1024>;
+				vactive = <768>;
+				hback-porch = <220>;
+				hfront-porch = <40>;
+				vback-porch = <21>;
+				vfront-porch = <7>;
+				hsync-len = <60>;
+				vsync-len = <10>;
+			};
+		};
+	};
+
+	lvds-channel@1 {
+		fsl,data-mapping = "spwg";
+		fsl,data-width = <24>;
+		status = "disabled";
+		crtc = "ipu2-di1";
+		display-timings {
+			native-mode = <&timing1>;
+			timing1: hsd100pxn1 {
+				clock-frequency = <65000000>;
+				hactive = <1024>;
+				vactive = <768>;
+				hback-porch = <220>;
+				hfront-porch = <40>;
+				vback-porch = <21>;
+				vfront-porch = <7>;
+				hsync-len = <60>;
+				vsync-len = <10>;
+			};
+		};
+	};
 };
 
 
@@ -734,9 +711,9 @@ timing1: hsd100pxn1 {
 &pcie {
 	pinctrl-names = "default";
 	pinctrl-0 = <&pinctrl_pcie>;
-    reset-gpio = <&gpio7 12 GPIO_ACTIVE_LOW>;
-    status = "okay";
-    vph-supply = <&vgen3_reg>;
+	reset-gpio = <&gpio7 12 GPIO_ACTIVE_LOW>;
+	status = "okay";
+	vph-supply = <&vgen3_reg>;
 };
 
 &uart1 {
@@ -746,59 +723,59 @@ &uart1 {
 };
 
 &usbh1 {
-    vbus-supply = <&reg_usb_h1_vbus>;
-    status = "okay";
-    over-current-active-low;
+	vbus-supply = <&reg_usb_h1_vbus>;
+	status = "okay";
+	over-current-active-low;
 };
 
 &usbotg {
-    vbus-supply = <&reg_usb_otg_vbus>;
-    pinctrl-names = "default";
-    pinctrl-0 = <&pinctrl_usbotg_lm>;
-    over-current-active-low;
-    status = "okay";
+	vbus-supply = <&reg_usb_otg_vbus>;
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_usbotg_lm>;
+	over-current-active-low;
+	status = "okay";
 };
 
 &usdhc2 {
-    status = "disabled";
+	status = "disabled";
 };
 
 &usdhc3 {
-    pinctrl-names = "default";
-    pinctrl-0 = <&pinctrl_usdhc3>;
-    cd-gpios = <&gpio2 0 GPIO_ACTIVE_LOW>;
-    wp-gpios = <&gpio2 1 GPIO_ACTIVE_HIGH>;
-    bus-width = <4>;
-    no-1-8-v;
-    keep-power-in-suspend;
-    enable-sdio-wakeup;
-    status = "okay";
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_usdhc3>;
+	cd-gpios = <&gpio2 0 GPIO_ACTIVE_LOW>;
+	wp-gpios = <&gpio2 1 GPIO_ACTIVE_HIGH>;
+	bus-width = <4>;
+	no-1-8-v;
+	keep-power-in-suspend;
+	enable-sdio-wakeup;
+	status = "okay";
 };
 
 &usdhc4 {
-    pinctrl-names = "default";
-    pinctrl-0 = <&pinctrl_usdhc4>;
-    bus-width = <8>;
-    non-removable;
-    no-1-8-v;
-    keep-power-in-suspend;
-    status = "okay";
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_usdhc4>;
+	bus-width = <8>;
+	non-removable;
+	no-1-8-v;
+	keep-power-in-suspend;
+	status = "okay";
 };
 
 &can1 {
-    pinctrl-names = "default";
-    pinctrl-0 = <&pinctrl_flexcan1>;
-    status = "okay";
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_flexcan1>;
+	status = "okay";
 };
 
 &can2 {
-    pinctrl-names = "default";
-    pinctrl-0 = <&pinctrl_flexcan2>;
-    status = "okay";
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_flexcan2>;
+	status = "okay";
 };
 
 &sata {
-    status = "okay";
+	status = "okay";
 };
 
 &pwm3 {
@@ -833,9 +810,9 @@ &pwm1 {
 };
 
 &ocotp {
-    status = "okay";
+	status = "okay";
 };
 
 &tempmon {
-    status = "okay";
+	status = "okay";
 };
diff --git a/arch/arm/boot/dts/mxxf1-hw4.dts b/arch/arm/boot/dts/mxxf1-hw4.dts
index 78fc508e1e2d..447d41c27c0c 100644
--- a/arch/arm/boot/dts/mxxf1-hw4.dts
+++ b/arch/arm/boot/dts/mxxf1-hw4.dts
@@ -44,3 +44,36 @@ adc7417@28 {
         reg = <0x28>;
         };
 };
+
+&fec {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_enet_lm>;
+	phy-mode = "rgmii";
+	status = "okay";
+	phy-reset-duration = <10>;
+	phy-reset-gpios = <&gpio1 25 GPIO_ACTIVE_LOW>;
+	phy-handle = <&miphy>;
+	phy-supply = <&vgen3_reg>;
+    txen-skew-ps = <0>;
+	txc-skew-ps = <3000>;
+	rxdv-skew-ps = <0>;
+	rxc-skew-ps = <3000>;
+	rxd0-skew-ps = <0>;
+	rxd1-skew-ps = <0>;
+	rxd2-skew-ps = <0>;
+	rxd3-skew-ps = <0>;
+	txd0-skew-ps = <0>;
+	txd1-skew-ps = <0>;
+	txd2-skew-ps = <0>;
+	txd3-skew-ps = <0>;
+	mdio {
+	   #address-cells = <1>;
+       #size-cells = <0>;
+	   miphy: ethernet-phy@1 {
+	       compatible = "ethernet-phy-ieee802.3-c22";
+	       reg = <0x1>;
+	       interrupt-parent = <&gpio1>;
+	       interrupts = <28 IRQ_TYPE_LEVEL_LOW>;
+	   };
+	};
+};
diff --git a/arch/arm/boot/dts/mxxf1-tsup.dts b/arch/arm/boot/dts/mxxf1-tsup.dts
index 18beb1618368..aca9478c31fa 100644
--- a/arch/arm/boot/dts/mxxf1-tsup.dts
+++ b/arch/arm/boot/dts/mxxf1-tsup.dts
@@ -45,3 +45,24 @@ adc7417@28 {
         reg = <0x28>;
         };
 };
+
+&fec {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_enet_lm>;
+	phy-mode = "rgmii-id";
+	status = "okay";
+	phy-reset-duration = <10>;
+	phy-reset-gpios = <&gpio1 25 GPIO_ACTIVE_LOW>;
+	phy-handle = <&arphy>;
+	phy-supply = <&vgen6_reg>;
+	mdio {
+	   #address-cells = <1>;
+       #size-cells = <0>;
+	   arphy: ethernet-phy@1 {
+	       compatible = "ethernet-phy-ieee802.3-c22";
+	       reg = <0x1>;
+	       interrupt-parent = <&gpio1>;
+	       interrupts = <26 IRQ_TYPE_EDGE_FALLING>;
+	   };
+	};
+};
diff --git a/arch/arm/boot/dts/mxxf1.dts b/arch/arm/boot/dts/mxxf1.dts
index 27fef6d8d28c..de1a28b1eae5 100644
--- a/arch/arm/boot/dts/mxxf1.dts
+++ b/arch/arm/boot/dts/mxxf1.dts
@@ -15,34 +15,60 @@
 
 #include "imx6q.dtsi"
 #include "mxxf1-common.dtsi"
+#include <dt-bindings/net/qca-ar803x.h>
 
 / {
-    model = "DR imx6q Maritime Computer";
-    compatible = "fsl,imx6q";
+	model = "DR imx6q Maritime Computer";
+	compatible = "fsl,imx6q";
 };
 
 &i2c3 {
-    clock-frequency = <100000>;
-    pinctrl-names = "default";
-    pinctrl-0 = <&pinctrl_i2c3>;
-    status = "okay";
-
-    egalax_ts@4 {
-        compatible = "eeti,egalax_ts";
-        reg = <0x04>;
-        interrupt-parent = <&gpio6>;
-        interrupts = <8 2>;
-        wakeup-gpios = <&gpio6 8 0>;
-        disable-suspend = <1>;
-        };
-
-    main_rtc: rtc@68 {
-        compatible = "stm,m41t82";
-        reg = <0x68>;
-        };
-
-    adc7417@28 {
-        compatible = "adi,ad7417";
-        reg = <0x28>;
-        };
+	clock-frequency = <100000>;
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_i2c3>;
+	status = "okay";
+
+	egalax_ts@4 {
+		compatible = "eeti,egalax_ts";
+		reg = <0x04>;
+		interrupt-parent = <&gpio6>;
+		interrupts = <8 2>;
+		wakeup-gpios = <&gpio6 8 0>;
+		disable-suspend = <1>;
+		};
+
+	main_rtc: rtc@68 {
+		compatible = "stm,m41t82";
+		reg = <0x68>;
+		};
+
+	adc7417@28 {
+		compatible = "adi,ad7417";
+		reg = <0x28>;
+		};
+};
+
+&fec {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_enet_lm>;
+	phy-mode = "rgmii-id";
+	status = "okay";
+	phy-reset-duration = <10>;
+	phy-reset-gpios = <&gpio1 25 GPIO_ACTIVE_LOW>;
+	phy-handle = <&arphy>;
+	phy-supply = <&vgen6_reg>;
+	mdio {
+		#address-cells = <1>;
+		#size-cells = <0>;
+		arphy: ethernet-phy@1 {
+			compatible = "ethernet-phy-id004d.d074";
+		   	qca,clk-out-frequency = <125000000>;
+		   	qca,clk-out-strength = <AR803X_STRENGTH_FULL>;
+		   	qca,keep-pll-enabled;
+			at803x,eee-disabled;
+			reg = <0x1>;
+			interrupt-parent = <&gpio1>;
+			interrupts = <26 IRQ_TYPE_EDGE_FALLING>;
+	   };
+	};
 };
-- 
2.25.1

